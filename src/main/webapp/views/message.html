<div class="modal fade" id="saveMessageModal" tabindex="-1" role="dialog" aria-labelledby="myMessageLabel"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <form name="form" role="form" novalidate
                  class="ng-scope ng-invalid ng-invalid-required ng-dirty ng-valid-minlength"
                  ng-submit="create()" show-validation>

                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"
                            ng-click="clear()">&times;</button>
                    <h4 class="modal-title" id="myMessageLabel">Send a Message</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>Email (Optional, I will keep it secret)</label>
                        <input type="email" class="form-control"
                               ng-model="message.email" name="email"
                               placeholder="{{ 'global.form.email.placeholder' | translate }}"
                               ng-maxlength=90 />
                        <div ng-show="form.email.$dirty && form.email.$invalid">
                            <p class="help-block"
                               ng-show="form.email.$invalid">
                                Please input a valid email address
                            </p>
                            <p class="help-block"
                               ng-show="form.email.$error.maxlength">
                                Your email cannot be longer than 90 characters
                            </p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Nickname (Optional)</label>
                        <input type="text" class="form-control"
                               ng-model="message.nickname" name="nickname"
                               placeholder="{{ 'Your nickname' }}"
                               ng-maxlength=30 ng-pattern="/^[a-zA-Z0-9]*$/" />
                        <div ng-show="form.nickname.$dirty && form.nickname.$invalid">
                            <p class="help-block"
                               ng-show="form.nickname.$error.maxlength">
                                Your nickname cannot be longer than 30 characters
                            </p>
                            <p class="help-block"
                               ng-show="form.nickname.$error.pattern">
                                Your nickname can only contain letters and digits
                            </p>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Content (Required)</label>
                            <textarea class="form-control" name="content"
                                      ng-model="message.content"
                                      placeholder="{{ 'Leave your message' }}"
                                      ng-minlength=1 required>
                            </textarea>
                        <div ng-show="form.content.$dirty && form.content.$invalid">
                            <p class="help-block"
                               ng-show="form.content.$error.required">
                                Message content is required.
                            </p>
                            <p class="help-block"
                               ng-show="form.content.$error.minlength">
                                Message content is required to be at least 1 character
                            </p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <p>You can also send an email to tianwen(at)tianwendong.com</p>
                    <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="clear()">
                        <span class="glyphicon glyphicon-ban-circle"></span> Cancel
                    </button>
                    <button type="submit" ng-disabled="form.$invalid" class="btn btn-primary">
                        <span class="glyphicon glyphicon-save"></span> Save
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
